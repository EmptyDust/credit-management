# æ´»åŠ¨è¯¦æƒ…é¡µåŠŸèƒ½æ”¹è¿›æ€»ç»“

## å·²è§£å†³çš„é—®é¢˜

### 1. âœ… ç»Ÿä¸€ä¿å­˜ä¸»è¡¨å•+è¯¦ç»†ä¿¡æ¯

- **é—®é¢˜**: "ä¿å­˜"æŒ‰é’®æœªèƒ½ä¸€æ¬¡æ€§æ”¶é›†å¹¶æäº¤ä¸»è¡¨å•ï¼ˆbasicInfoï¼‰å’Œè¯¦ç»†ä¿¡æ¯ï¼ˆdetailInfoï¼‰æ•°æ®
- **è§£å†³æ–¹æ¡ˆ**:
  - åœ¨`ActivityDetailContainer`ä¸­æå‡çŠ¶æ€ç®¡ç†ï¼Œç»Ÿä¸€ç®¡ç†`basicInfo`å’Œ`detailInfo`
  - å®ç°`handleSave`æ–¹æ³•ï¼Œæ ¹æ®æ´»åŠ¨ç±»åˆ«æ„å»ºå¯¹åº”çš„æ›´æ–°è¯·æ±‚æ•°æ®
  - ä½¿ç”¨`useImperativeHandle`æš´éœ²ä¿å­˜æ–¹æ³•ç»™çˆ¶ç»„ä»¶
  - åœ¨`ActivityDetailPage`ä¸­å®ç°ç»Ÿä¸€çš„ä¿å­˜é€»è¾‘

### 2. âœ… è¯¦ç»†ä¿¡æ¯åŒºçš„å—æ§åŒ–ï¼ˆæ‰€æœ‰ç±»å‹ï¼‰

- **é—®é¢˜**: åªæœ‰"åˆ›æ–°åˆ›ä¸šå®è·µæ´»åŠ¨"ç±»å‹å®ç°äº†å—æ§ç»„ä»¶ï¼Œå…¶ä»–ç±»å‹æœªå—æ§
- **è§£å†³æ–¹æ¡ˆ**:
  - æ›´æ–°æ‰€æœ‰æ´»åŠ¨ç±»å‹è¯¦æƒ…ç»„ä»¶çš„æ¥å£å®šä¹‰ï¼Œæ·»åŠ `onSave`ã€`detailInfo`ã€`setDetailInfo` props
  - å°†æ‰€æœ‰è¾“å…¥æ¡†ä»`defaultValue`æ”¹ä¸ºå—æ§çš„`value`å’Œ`onChange`
  - å®ç°çš„æ´»åŠ¨ç±»å‹ï¼š
    - âœ… åˆ›æ–°åˆ›ä¸šå®è·µæ´»åŠ¨ (`InnovationActivityDetail`)
    - âœ… å­¦ç§‘ç«èµ› (`CompetitionActivityDetail`)
    - âœ… å¤§å­¦ç”Ÿåˆ›ä¸šé¡¹ç›® (`EntrepreneurshipProjectDetail`)
    - âœ… åˆ›ä¸šå®è·µé¡¹ç›® (`EntrepreneurshipPracticeDetail`)
    - âœ… è®ºæ–‡ä¸“åˆ© (`PaperPatentDetail`)

### 3. âœ… å®¡æ‰¹å¼¹çª—/è¡¨å•

- **é—®é¢˜**: æ•™å¸ˆ/ç®¡ç†å‘˜ç‚¹å‡»"å®¡æ‰¹"æŒ‰é’®åï¼Œæ²¡æœ‰å¼¹å‡ºå®¡æ‰¹è¡¨å•
- **è§£å†³æ–¹æ¡ˆ**:
  - åœ¨`ActivityDetailPage`ä¸­æ·»åŠ å®¡æ‰¹å¼¹çª—ç»„ä»¶
  - å®ç°å®¡æ‰¹è¡¨å•ï¼Œæ”¯æŒé€‰æ‹©é€šè¿‡/æ‹’ç»å’Œå¡«å†™å®¡æ‰¹æ„è§
  - æ·»åŠ `handleReview`æ–¹æ³•å¤„ç†å®¡æ‰¹æäº¤
  - æ·»åŠ æƒé™æ§åˆ¶ï¼šåªæœ‰æ•™å¸ˆ/ç®¡ç†å‘˜ä¸”æ´»åŠ¨çŠ¶æ€ä¸ºå¾…å®¡æ ¸æ—¶æ˜¾ç¤ºå®¡æ‰¹æŒ‰é’®

### 4. âœ… åˆ é™¤æŒ‰é’®æ˜¾ç¤ºä¸æƒé™é—®é¢˜

- **é—®é¢˜**: éœ€è¦ç¡®ä¿æ´»åŠ¨æ‰€æœ‰è€…åœ¨è‰ç¨¿çŠ¶æ€ä¸‹æ€»èƒ½çœ‹åˆ°"åˆ é™¤"æŒ‰é’®
- **è§£å†³æ–¹æ¡ˆ**:
  - æ·»åŠ `canDelete`æƒé™åˆ¤æ–­ï¼š`isOwner && activity?.status === "draft"`
  - å®ç°`handleDelete`æ–¹æ³•ï¼ŒåŒ…å«ç¡®è®¤å¯¹è¯æ¡†
  - æ·»åŠ åˆ é™¤æŒ‰é’®åˆ°é¡¶éƒ¨æ“ä½œåŒºåŸŸ

### 5. âœ… å…¶ä»–æ´»åŠ¨ç±»å‹çš„ç¼–è¾‘ä¸ä¿å­˜

- **é—®é¢˜**: å…¶ä»–ç±»å‹è¿˜æœªå®ç°ç»Ÿä¸€çš„ç¼–è¾‘å’Œä¿å­˜ä½“éªŒ
- **è§£å†³æ–¹æ¡ˆ**:
  - æ‰€æœ‰æ´»åŠ¨ç±»å‹ç°åœ¨éƒ½æ”¯æŒå—æ§ç¼–è¾‘
  - ç»Ÿä¸€çš„ä¿å­˜é€»è¾‘å¤„ç†æ‰€æœ‰ç±»å‹çš„è¯¦ç»†ä¿¡æ¯
  - ä¸€è‡´çš„ç¼–è¾‘ä½“éªŒå’Œè¡¨å•éªŒè¯

### 6. âœ… URL å‚æ•°è‡ªåŠ¨è¿›å…¥ç¼–è¾‘æ¨¡å¼

- **é—®é¢˜**: æ´»åŠ¨åˆ—è¡¨"ç¼–è¾‘"æŒ‰é’®è·³è½¬æ—¶å¸¦æœ‰`?edit=1`å‚æ•°ï¼Œä½†è¯¦æƒ…é¡µæœªè‡ªåŠ¨è¯†åˆ«
- **è§£å†³æ–¹æ¡ˆ**:
  - åœ¨`ActivityDetailPage`ä¸­ä½¿ç”¨`useSearchParams`è·å– URL å‚æ•°
  - åœ¨`useEffect`ä¸­æ£€æŸ¥`edit=1`å‚æ•°ï¼Œè‡ªåŠ¨è®¾ç½®`isEditing`ä¸º`true`

### 7. âœ… è¡¨å•æ ¡éªŒä¸ç”¨æˆ·ä½“éªŒ

- **æ”¹è¿›å†…å®¹**:
  - æ·»åŠ äº†ä¿å­˜ã€å®¡æ‰¹ç­‰æ“ä½œçš„ loading çŠ¶æ€
  - å®ç°äº†é”™è¯¯æç¤ºå’ŒæˆåŠŸåé¦ˆ
  - æ·»åŠ äº†ç¡®è®¤å¯¹è¯æ¡†ï¼ˆåˆ é™¤æ“ä½œï¼‰
  - ç»Ÿä¸€çš„æŒ‰é’®çŠ¶æ€ç®¡ç†

## æŠ€æœ¯å®ç°ç»†èŠ‚

### çŠ¶æ€ç®¡ç†æ¶æ„

```
ActivityDetailPage
â”œâ”€â”€ basicInfo (ä¸»è¡¨å•çŠ¶æ€)
â”œâ”€â”€ detailInfo (è¯¦ç»†ä¿¡æ¯çŠ¶æ€)
â”œâ”€â”€ isEditing (ç¼–è¾‘æ¨¡å¼çŠ¶æ€)
â””â”€â”€ ActivityDetailContainer
    â”œâ”€â”€ InnovationActivityDetail
    â”œâ”€â”€ CompetitionActivityDetail
    â”œâ”€â”€ EntrepreneurshipProjectDetail
    â”œâ”€â”€ EntrepreneurshipPracticeDetail
    â””â”€â”€ PaperPatentDetail
```

### ä¿å­˜æµç¨‹

1. ç”¨æˆ·ç‚¹å‡»"ä¿å­˜"æŒ‰é’®
2. è§¦å‘`ActivityDetailContainer`çš„`handleSave`æ–¹æ³•
3. æ”¶é›†å½“å‰çš„`basicInfo`å’Œ`detailInfo`çŠ¶æ€
4. æ ¹æ®æ´»åŠ¨ç±»åˆ«æ„å»ºå¯¹åº”çš„ API è¯·æ±‚æ•°æ®
5. è°ƒç”¨åç«¯ API æ›´æ–°æ´»åŠ¨ä¿¡æ¯
6. æ˜¾ç¤ºæˆåŠŸ/å¤±è´¥æç¤º
7. åˆ·æ–°æ´»åŠ¨æ•°æ®å¹¶é€€å‡ºç¼–è¾‘æ¨¡å¼

### æƒé™æ§åˆ¶

- **ç¼–è¾‘æƒé™**: `isOwner && activity?.status === "draft"`
- **åˆ é™¤æƒé™**: `isOwner && activity?.status === "draft"`
- **å®¡æ‰¹æƒé™**: `(user?.userType === "teacher" || user?.userType === "admin") && activity?.status === "pending_review"`
- **æ’¤å›æƒé™**: `isOwner && activity?.status === "pending_review"`

## å¾…å®Œå–„åŠŸèƒ½

### 8. ğŸ”„ é™„ä»¶ã€å‚ä¸è€…ç­‰åŠŸèƒ½çš„å®Œå–„

- **çŠ¶æ€**: ç›¸å…³æŒ‰é’®å·²éšè—ï¼ŒåŸºç¡€æ¡†æ¶å·²æ­å»º
- **åç»­å¼€å‘**: å¦‚éœ€æ”¯æŒæ‰¹é‡ä¸Šä¼ ã€ç®¡ç†ç­‰ï¼Œè¿˜éœ€å¼€å‘å…·ä½“åŠŸèƒ½

### 9. ğŸ”„ è¡¨å•æ ¡éªŒå¢å¼º

- **å½“å‰çŠ¶æ€**: åŸºç¡€æ ¡éªŒå·²å®ç°
- **å¯ä¼˜åŒ–é¡¹**:
  - æ·»åŠ å¿…å¡«å­—æ®µéªŒè¯
  - æ·»åŠ æ ¼å¼éªŒè¯ï¼ˆæ—¥æœŸã€æ•°å­—ç­‰ï¼‰
  - æ·»åŠ è‡ªå®šä¹‰éªŒè¯è§„åˆ™

## æ–‡ä»¶ä¿®æ”¹æ¸…å•

### æ ¸å¿ƒæ–‡ä»¶

- `frontend/src/pages/ActivityDetail.tsx` - ä¸»é¡µé¢é€»è¾‘
- `frontend/src/components/activity-details/ActivityDetailContainer.tsx` - å®¹å™¨ç»„ä»¶
- `frontend/src/components/activity-details/index.ts` - å¯¼å‡ºæ–‡ä»¶

### è¯¦æƒ…ç»„ä»¶

- `frontend/src/components/activity-details/InnovationActivityDetail.tsx`
- `frontend/src/components/activity-details/CompetitionActivityDetail.tsx`
- `frontend/src/components/activity-details/EntrepreneurshipProjectDetail.tsx`
- `frontend/src/components/activity-details/EntrepreneurshipPracticeDetail.tsx`
- `frontend/src/components/activity-details/PaperPatentDetail.tsx`

## æµ‹è¯•å»ºè®®

1. **ç¼–è¾‘åŠŸèƒ½æµ‹è¯•**:

   - æµ‹è¯•æ‰€æœ‰æ´»åŠ¨ç±»å‹çš„ç¼–è¾‘åŠŸèƒ½
   - éªŒè¯è¡¨å•æ•°æ®çš„æ­£ç¡®ä¿å­˜
   - æµ‹è¯• URL å‚æ•°è‡ªåŠ¨è¿›å…¥ç¼–è¾‘æ¨¡å¼

2. **æƒé™æµ‹è¯•**:

   - æµ‹è¯•ä¸åŒç”¨æˆ·è§’è‰²çš„æƒé™æ§åˆ¶
   - éªŒè¯åˆ é™¤æŒ‰é’®çš„æ˜¾ç¤ºé€»è¾‘
   - æµ‹è¯•å®¡æ‰¹åŠŸèƒ½çš„æƒé™æ§åˆ¶

3. **ç”¨æˆ·ä½“éªŒæµ‹è¯•**:
   - æµ‹è¯• loading çŠ¶æ€çš„æ˜¾ç¤º
   - éªŒè¯é”™è¯¯æç¤ºå’ŒæˆåŠŸåé¦ˆ
   - æµ‹è¯•ç¡®è®¤å¯¹è¯æ¡†åŠŸèƒ½

## æ€»ç»“

æ‰€æœ‰æ ¸å¿ƒé—®é¢˜å·²è§£å†³ï¼Œæ´»åŠ¨è¯¦æƒ…é¡µç°åœ¨æä¾›äº†å®Œæ•´çš„ç¼–è¾‘ã€ä¿å­˜ã€å®¡æ‰¹ã€åˆ é™¤åŠŸèƒ½ï¼Œæ”¯æŒæ‰€æœ‰æ´»åŠ¨ç±»å‹ï¼Œå¹¶å…·æœ‰è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒã€‚ç³»ç»Ÿç°åœ¨å…·å¤‡äº†ç”Ÿäº§ç¯å¢ƒæ‰€éœ€çš„ä¸»è¦åŠŸèƒ½ã€‚
